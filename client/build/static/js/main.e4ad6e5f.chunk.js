(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{16:function(e,t,s){e.exports={container:"Home_container__1ukFy",roomNameInput:"Home_roomNameInput__1dC4n",inputField:"Home_inputField__3KZY2",enterRoomButton:"Home_enterRoomButton__1zgKv",optionsWrapper:"Home_optionsWrapper__27dv_",options:"Home_options__1YQ6R",info:"Home_info__2xHPN",tooltip:"Home_tooltip__2mjxJ",tooltipFooter:"Home_tooltipFooter__3T5Vh",passwordLabel:"Home_passwordLabel__2llJZ"}},20:function(e,t,s){e.exports={messageItem:"Message_messageItem__3PD3E",myMessage:"Message_myMessage__G8Muj",recievedMessage:"Message_recievedMessage__BfYUT",adminMessage:"Message_adminMessage__rqwYx",messageDetails:"Message_messageDetails__2_5c4",messageText:"Message_messageText__2TYjU",messageSender:"Message_messageSender__2Yhyw",messageTimestamp:"Message_messageTimestamp__JPKuK"}},21:function(e,t,s){e.exports={header:"RoomHeader_header__WqSgC",roomName:"RoomHeader_roomName__rGrr6",backArrow:"RoomHeader_backArrow__2OejU",hashMark:"RoomHeader_hashMark__2vIhE",roomStatus:"RoomHeader_roomStatus__2__Rd",settings:"RoomHeader_settings__304-7",settingsIcon:"RoomHeader_settingsIcon__lM6Rf"}},26:function(e,t,s){e.exports={userList:"ChatContainer_userList__1Ntkg",chatContainer:"ChatContainer_chatContainer__iVAk2",isDesktop:"ChatContainer_isDesktop__1wgA0",messagesList:"ChatContainer_messagesList__2y9Gx"}},27:function(e,t,s){e.exports={footer:"ChatInput_footer__1AnZt",typingMessage:"ChatInput_typingMessage__3YXXt",messageInputContainer:"ChatInput_messageInputContainer__1HD9S",messageInputField:"ChatInput_messageInputField__2JYHp",sendMessageButton:"ChatInput_sendMessageButton__205ZH",settingsInputField:"ChatInput_settingsInputField__3IPOi"}},31:function(e,t,s){e.exports={wrapper:"TypingDots_wrapper__1kX5A",dot:"TypingDots_dot__7aHH0",loadingFade:"TypingDots_loadingFade__Jgs2x"}},35:function(e,t,s){e.exports={sectionHeader:"HomeHeader_sectionHeader__1YjmP",logoWrapper:"HomeHeader_logoWrapper__3mo2R",logo:"HomeHeader_logo__1VZOy"}},36:function(e,t,s){e.exports={toggleCheckbox:"ToggleSwitch_toggleCheckbox__29hNB",toggleCheckboxLabel:"ToggleSwitch_toggleCheckboxLabel__2K9ve",toggleHandle:"ToggleSwitch_toggleHandle__2uH25"}},38:function(e,t,s){e.exports={userItem:"Room_userItem__snPH5",roomContainer:"Room_roomContainer__ZuWi0"}},44:function(e,t){e.exports={updateRoom:function(e,t){fetch(window.location.search,{method:"POST",body:JSON.stringify({hasPassword:e,password:t})}).then((function(e){return e.json()})).then((function(e){console.log("Room updated: ",e)})).catch((function(e){console.error("Error: ",e)}))}}},47:function(e,t){e.exports={fetchData:function(e,t){fetch(window.location.search).then((function(s){s.json().then((function(s){e(s.messages),t(s.persistent)}))}))}}},54:function(e,t,s){},62:function(e,t,s){"use strict";s.r(t);var n,a=s(2),o=s(39),c=s.n(o),r=(s(54),s(24)),i=s(3),l=s(4),u=s(33),m=s(35),j=s.n(m),d=s(1),_=function(){return Object(d.jsx)("header",{className:j.a.sectionHeader,children:Object(d.jsx)("a",{className:j.a.logoWrapper,href:"/",children:Object(d.jsxs)("p",{className:j.a.logo,children:["S",Object(d.jsx)("span",{children:"OCK"}),"C",Object(d.jsx)("span",{children:"HAT"})]})})})},p=s(36),b=s.n(p),g=function(e){var t=e.persistent,s=e.setPersistent;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("input",{checked:t,onChange:function(){return s(!t)},className:b.a.toggleCheckbox,id:"react-switch-new",type:"checkbox"}),Object(d.jsx)("label",{style:{background:t&&"#06D6A0"},className:b.a.toggleCheckboxLabel,htmlFor:"react-switch-new",children:Object(d.jsx)("span",{className:b.a.toggleHandle})})]})},h=s(16),O=s.n(h),x=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),s=t[0],n=t[1],o=Object(a.useState)(""),c=Object(l.a)(o,2),i=c[0],m=c[1],j=Object(a.useState)(!1),p=Object(l.a)(j,2),b=p[0],h=p[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(_,{}),Object(d.jsx)("main",{className:O.a.container,children:Object(d.jsxs)("section",{className:O.a.roomNameInput,children:[Object(d.jsx)("input",{placeholder:"Room Name",type:"text",onChange:function(e){return m(e.target.value)},className:O.a.inputField,required:!0}),Object(d.jsx)("input",{placeholder:"Username",type:"text",onChange:function(e){return n(e.target.value)},className:O.a.inputField,required:!0}),Object(d.jsxs)("span",{className:O.a.optionsWrapper,children:[Object(d.jsx)(r.b,{onClick:function(e){return s&&i?null:e.preventDefault()},to:"/chat?name=".concat(s,"&room=").concat(i,"&per=").concat(b),children:Object(d.jsx)("button",{type:"submit",className:O.a.enterRoomButton,children:"Join room"})}),Object(d.jsx)("div",{className:O.a.options,children:Object(d.jsxs)("label",{children:[Object(d.jsxs)("span",{children:["Persist Messages?",Object(d.jsx)(u.a,{className:O.a.info}),Object(d.jsxs)("span",{className:O.a.tooltip,children:["Rooms with persistent messages enabled will be preserved for future visits. Leave this setting disabled if you wish your conversations to disappear when you are done.",Object(d.jsx)("span",{className:O.a.tooltipFooter,children:"(Only applies to newly created rooms)"})]})]}),Object(d.jsx)(g,{persistent:b,setPersistent:h})]})})]})]})})]})},f=s(49),N=s(48),M=s(20),C=s.n(M),v=function(e){var t=e.index,s=e.message,n=e.name;return Object(d.jsxs)("li",{className:"".concat(C.a.messageItem,"\n                ").concat(s.user===n?C.a.myMessage:"Admin"===s.user?C.a.adminMessage:C.a.recievedMessage),children:[Object(d.jsx)("p",{className:C.a.messageText,children:s.text}),Object(d.jsxs)("span",{className:C.a.messageDetails,children:[Object(d.jsx)("small",{className:C.a.messageSender,children:s.user}),Object(d.jsx)("small",{className:C.a.messageTimestamp,children:s.timestamp})]})]},t)},w=s(26),S=s.n(w),I=function(e){var t=e.messages,s=e.messagesEndRef,n=e.name,a=e.userList;return Object(d.jsxs)("section",{className:S.a.chatContainer,children:[Object(d.jsxs)("ol",{className:S.a.messagesList,children:[t.map((function(e,t){return Object(d.jsx)(v,{index:t,message:e,name:n})})),Object(d.jsx)("div",{className:S.a.messagesEnd,ref:s})]}),Object(d.jsx)("div",{className:"".concat(S.a.userList," ").concat(S.a.isDesktop),children:a})]})},y=s(31),H=s.n(y),k=function(){return Object(d.jsxs)("div",{className:H.a.wrapper,children:[Object(d.jsx)("div",{className:H.a.dot}),Object(d.jsx)("div",{className:H.a.dot}),Object(d.jsx)("div",{className:H.a.dot})]})},T=function(e,t,s,n){e.preventDefault(),s&&(t.emit("sendMessage",{message:s}),n(""))},R=s(27),L=s.n(R),P=function(e){var t=e.setMessage,s=e.socket,n=e.message,a=e.typingMessage;return Object(d.jsxs)("footer",{"aria-label":"Chat Room Input",className:L.a.footer,children:[a?Object(d.jsxs)("span",{className:L.a.typingMessage,children:[Object(d.jsx)(k,{}),a]}):null,Object(d.jsxs)("form",{action:"",className:L.a.messageInputContainer,onSubmit:function(e){return T(e,s,n,t)},children:[Object(d.jsx)("input",{type:"text",value:n,onChange:function(e){return t(e.target.value)},name:"chatInput",onKeyDown:function(e){return function(e,t,s,n){"Enter"===e.key&&T(e,t,s,n)}(e,s,n,t)},onKeyUp:function(e){return function(e,t){t.emit("typing"),""===e.target.value&&t.emit("stoppedTyping")}(e,s)},placeholder:"Write message...",className:L.a.messageInputField,autoComplete:"off"}),n?Object(d.jsx)("button",{type:"submit",className:L.a.sendMessageButton,children:Object(d.jsx)(u.b,{})}):null]})]})},F=s(43),B=s.n(F),D=s(30),E=s(44),A=s(7),J=s.n(A),W=function(e){var t=e.setMenuOpen,s=e.hasPassword,n=e.setHasPassword,a=e.password,o=e.setPassword,c=e.room,r=e.userList;return Object(d.jsx)("section",{className:J.a.menuContainer,children:Object(d.jsxs)("div",{className:J.a.menuInnerContainer,children:[Object(d.jsx)(D.b,{className:J.a.menuClose,"aria-label":"Close Menu",onClick:function(){return t(!1)}}),Object(d.jsxs)("div",{className:"".concat(J.a.userListContainer," ").concat(J.a.isMobile),children:[Object(d.jsxs)("p",{className:J.a.hashMark,children:["#",c]}),Object(d.jsx)("p",{className:J.a.settingsTitle,children:"USERS"}),Object(d.jsx)("div",{className:"".concat(J.a.userList," ").concat(J.a.isMobile),children:r})]}),Object(d.jsx)("p",{className:J.a.settingsTitle,children:"ROOM SETTINGS"}),Object(d.jsxs)("div",{className:"".concat(J.a.menuSection," ").concat(J.a.passwordSection),children:[Object(d.jsxs)("label",{children:[Object(d.jsx)("span",{children:"Password Protect Room?"}),Object(d.jsx)(B.a,{onChange:function(){return n(!s)},checked:s})]}),Object(d.jsxs)("div",{className:s?J.a.passwordContainer:J.a.hidden,children:[Object(d.jsx)("input",{type:"text",onChange:function(e){return o(e.target.value)},name:"password",placeholder:"Set Password",className:J.a.settingsInputField,autoComplete:"off"}),Object(d.jsxs)("div",{className:J.a.passwordButtons,children:[Object(d.jsx)("button",{className:J.a.saveButton,onClick:function(){return Object(E.updateRoom)(s,a)},children:"SAVE CHANGES"}),Object(d.jsx)("button",{className:J.a.cancelButton,children:"CANCEL"})]})]})]})]})})},K=s(45),Y=s(46),Z=s(21),U=s.n(Z),G=function(e){var t=e.handleNavigate,s=e.setMenuOpen,n=e.menuOpen,a=e.room,o=e.persistent,c=e.hasPassword;return Object(d.jsxs)("header",{"aria-label":a,className:U.a.header,children:[Object(d.jsx)(K.a,{"aria-label":"Navigate Back",className:U.a.backArrow,onClick:function(){return t()}}),Object(d.jsxs)("h1",{className:U.a.roomName,children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("span",{className:U.a.hashMark,children:"#"}),a,c?Object(d.jsx)(Y.a,{style:{color:"hsla(137, 100%, 39%, 1)",fontSize:"1.3rem",margin:"0 0.5rem"},"aria-label":"Room is password protected"}):null,o?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(D.a,{style:{color:"hsl(137, 53%, 44%)",fontSize:"1.3rem",margin:"0 0.4rem 0 1.5rem"},"aria-label":"Conversations in this room will be saved for future visits"}),Object(d.jsx)("span",{className:U.a.roomStatus,children:"Chat logging enabled"})]}):null]}),Object(d.jsx)("span",{className:U.a.settings,onClick:function(){return s(!n)},children:Object(d.jsx)(D.c,{"aria-expanded":n,"aria-label":"Toggle menu",className:U.a.settingsIcon,style:{fontSize:"0.8rem"}})})]})]})},V=s(47),z=s(38),q=s.n(z),X=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),s=t[0],o=t[1],c=Object(a.useState)(""),u=Object(l.a)(c,2),m=u[0],j=u[1],_=Object(a.useState)(),p=Object(l.a)(_,2),b=p[0],g=p[1],h=Object(a.useState)(""),O=Object(l.a)(h,2),x=O[0],M=O[1],C=Object(a.useState)([]),v=Object(l.a)(C,2),w=v[0],S=v[1],y=Object(a.useState)(!1),H=Object(l.a)(y,2),k=H[0],T=H[1],R=Object(a.useState)(null),L=Object(l.a)(R,2),F=L[0],B=L[1],D=Object(a.useState)(!1),E=Object(l.a)(D,2),A=E[0],J=E[1],K=Object(a.useState)(!1),Y=Object(l.a)(K,2),Z=Y[0],U=Y[1],z=Object(a.useState)(null),X=Object(l.a)(z,2),Q=X[0],$=X[1],ee=Object(a.useRef)(null),te=Object(r.c)(),se=Object(l.a)(te,1)[0],ne=window.location.hostname;Object(a.useEffect)((function(){var e=se.get("name"),t=se.get("room");n=Object(N.a)(ne),o(e),j(t),n.emit("join",{name:e,room:t},(function(e){e&&alert(e)})),Object(V.fetchData)(S,J)}),[se,ne]),Object(a.useEffect)((function(){n.on("message",(function(e){S((function(t){return[].concat(Object(f.a)(t),[e])}))})),n.on("roomData",(function(e){var t=e.users;g(t)}))}),[]),Object(a.useEffect)((function(){var e=null;return n.on("typing",(function(t){clearTimeout(e),1===t.length?(B("".concat(t[0].name," is typing...")),e=setTimeout((function(){B(null)}),2e3)):t.length>1&&(B("".concat(t.length," people are typing...")),e=setTimeout((function(){B(null)}),2e3))})),n.on("stoppedTyping",(function(){B(null)})),function(){clearTimeout(e)}})),Object(a.useEffect)((function(){!function(e){var t;null===(t=e.current)||void 0===t||t.scrollIntoView({behavior:"smooth"})}(ee)}),[w]);var ae=Object(i.f)(),oe=b?b.map((function(e){var t=e.name;return Object(d.jsx)("div",{className:q.a.userItem,children:t},t)})):null;return Object(d.jsxs)("main",{"aria-label":"Chat Room",className:q.a.roomContainer,children:[Object(d.jsx)(G,{handleNavigate:function(){ae(-1)},setMenuOpen:T,menuOpen:k,room:m,persistent:A,hasPassword:Z}),k?Object(d.jsx)(W,{setMenuOpen:T,hasPassword:Z,setHasPassword:U,password:Q,setPassword:$,room:m,userList:oe}):null,Object(d.jsx)(I,{messages:w,messagesEndRef:ee,name:s,userList:oe}),Object(d.jsx)(P,{setMessage:M,message:x,socket:n,typingMessage:F})]})},Q=function(){return Object(d.jsx)(r.a,{children:Object(d.jsxs)(i.c,{children:[Object(d.jsx)(i.a,{exact:!0,path:"/",element:Object(d.jsx)(x,{})}),Object(d.jsx)(i.a,{path:"/chat",element:Object(d.jsx)(X,{})})]})})};c.a.render(Object(d.jsx)(Q,{}),document.getElementById("root"))},7:function(e,t,s){e.exports={menuContainer:"Menu_menuContainer__1J9e_",slideMenuDown:"Menu_slideMenuDown__1Pi2r",menuInnerContainer:"Menu_menuInnerContainer__vBoUc",menuSection:"Menu_menuSection__3TMiA",passwordSection:"Menu_passwordSection__3hjkh",menuClose:"Menu_menuClose__1IMbi",userListContainer:"Menu_userListContainer__SBQwZ",settingsTitle:"Menu_settingsTitle__3aONM",userList:"Menu_userList__2ittM",userItem:"Menu_userItem__1lS5x",passwordContainer:"Menu_passwordContainer__1LK7T",settingsInputField:"Menu_settingsInputField__1hRmz",passwordButtons:"Menu_passwordButtons__3GdTx",saveButton:"Menu_saveButton__1-Jhf",cancelButton:"Menu_cancelButton__jVaAC",hidden:"Menu_hidden__ORFD7",hashMark:"Menu_hashMark__2Zote",fadeIn:"Menu_fadeIn__3cbPW",isMobile:"Menu_isMobile__1cv6Z"}}},[[62,1,2]]]);
//# sourceMappingURL=main.e4ad6e5f.chunk.js.map